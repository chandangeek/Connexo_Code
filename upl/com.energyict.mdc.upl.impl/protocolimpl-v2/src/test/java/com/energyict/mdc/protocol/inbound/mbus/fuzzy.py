#!/usr/bin/env python2.7

#  Copyright (c) 2023 by Honeywell International Inc. All Rights Reserved
#

import socket
import binascii
import random


TCP_IP = '127.0.0.1'
TCP_PORT = 4060

udpDestination = ("127.0.0.1", 8152)

#MESSAGE = b'\x00\x01\x00\x01\x00\x01\x00\x4f\xc2\x00\x00\x28\x00\x00\x19\x09\x00\xff\xff\x02\x03\x09\x0f\x36\x37\x30\x2d\x30\x35\x44\x38\x43\x44\x2d\x31\x38\x35\x30\x12\x00\x01\x02\x04\x09\x0c\x07\xe5\x03\x16\x01\x0a\x0c\x2b\x50\x00\x00\x00\x12\x00\x00\x12\x00\xd0\x09\x16\x50\x4c\x43\x2d\x47\x33\x20\x43\x6c\x65\x61\x72\x20\x4e\x6f\x64\x65\x20\x4c\x69\x73\x74'
MESSAGE = b'\xAF\x44\x07\x07\x07\x77\x70\x00\x00\x00\x7A\x26\xB8\x0A\x25\xAB\xD5\x49\x56\x74\x5D\x59\x64\x0C\x2A\xAA\xB6\x23\x8F\x88\xCD\xB4\x24\x00\x22\x77\xA5\x30\x81\xEC\xED\xC0\xBA\x7E\xC7\xCC\x09\x88\x1A\x89\x58\x2C\x90\x03\xE8\xAE\xF4\x6B\x4C\xAC\xFC\xD0\x0C\x88\x1A\x89\x58\x2C\x90\x03\xE8\xAE\xF4\x6B\x4C\xAC\xFC\xD0\x0C\xC2\x5B\xCB\xF4\x82\x1D\x14\x07\x24\x24\xF2\x95\x54\xB3\xBF\xE9\xE5\xCB\x45\xEB\xA2\xE9\x2B\x14\x8B\x09\x3A\xEF\xB8\x68\x9F\x53\xCE\x9E\x93\x47\x5F\x6F\x3D\xB0\xBF\x7D\x3D\x41\x13\x67\xF4\x7B\x58\x06\xEE\x48\xFE\x4D\x6A\xAC\x50\x3B\xCE\x13\x68\x47\xBD\x5D\x3D\x69\x9A\x09\x74\xF6\x1F\xC0\x49\x90\x27\x01\xA2\x66\xB2\x0E\xD1\x3E\x63\x35\xCF\x5B\x6B\x4B\x0D\xB7\x0F\x9F\x83\x9C\xED\x2F'


def sendUDP(msg):
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    s.sendto(msg, udpDestination)



def sendTCP(msg):
    print "sending %d bytes: %s" % (len(msg), binascii.hexlify(bytearray(msg)))

    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((TCP_IP, TCP_PORT))
    s.send(msg)
    s.close()

    print ""


for i in range(10):
    numberOfBytes = random.randrange(0,65535)
    randomBytes = bytearray()
    zeroBytes = bytearray()
    for b in range(numberOfBytes):
        randomBytes.append( random.randrange(0x100) )
        zeroBytes.append(0x00)

    sendTCP(randomBytes)
    sendUDP(randomBytes)
    sendTCP(zeroBytes)
    sendUDP(zeroBytes)

# Positive message
sendUDP(MESSAGE)

